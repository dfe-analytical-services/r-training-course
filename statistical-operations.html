<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>DfE R training</title>
  <meta name="description" content="This resource is an introduction to the R programming language. It can be used as standalone learning tool, or as part of training sessions.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="DfE R training" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This resource is an introduction to the R programming language. It can be used as standalone learning tool, or as part of training sessions." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="DfE R training" />
  
  <meta name="twitter:description" content="This resource is an introduction to the R programming language. It can be used as standalone learning tool, or as part of training sessions." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="graphs.html">
<link rel="next" href="iteration.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introductory R Training</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="why-r.html"><a href="why-r.html"><i class="fa fa-check"></i><b>1</b> Why R?</a><ul>
<li class="chapter" data-level="1.1" data-path="why-r.html"><a href="why-r.html#current-workflow"><i class="fa fa-check"></i><b>1.1</b> Current Workflow</a></li>
<li class="chapter" data-level="1.2" data-path="why-r.html"><a href="why-r.html#the-bottom-line"><i class="fa fa-check"></i><b>1.2</b> The bottom line</a></li>
<li class="chapter" data-level="1.3" data-path="why-r.html"><a href="why-r.html#r-is-the-answer"><i class="fa fa-check"></i><b>1.3</b> R is the answer</a></li>
<li class="chapter" data-level="1.4" data-path="why-r.html"><a href="why-r.html#but-what-is-r"><i class="fa fa-check"></i><b>1.4</b> But what is R?</a></li>
<li class="chapter" data-level="1.5" data-path="why-r.html"><a href="why-r.html#should-i-stop-using-all-other-tools"><i class="fa fa-check"></i><b>1.5</b> Should I stop using all other tools?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started-with-rstudio.html"><a href="getting-started-with-rstudio.html"><i class="fa fa-check"></i><b>2</b> Getting Started with RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started-with-rstudio.html"><a href="getting-started-with-rstudio.html#opening-r-studio"><i class="fa fa-check"></i><b>2.1</b> Opening R Studio</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started-with-rstudio.html"><a href="getting-started-with-rstudio.html#r-studio-layout"><i class="fa fa-check"></i><b>2.2</b> R Studio Layout</a></li>
<li class="chapter" data-level="2.3" data-path="getting-started-with-rstudio.html"><a href="getting-started-with-rstudio.html#setting-up-a-project"><i class="fa fa-check"></i><b>2.3</b> Setting up a project</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a></li>
<li class="chapter" data-level="4" data-path="general-coding.html"><a href="general-coding.html"><i class="fa fa-check"></i><b>4</b> General Coding</a><ul>
<li class="chapter" data-level="4.1" data-path="general-coding.html"><a href="general-coding.html#objects"><i class="fa fa-check"></i><b>4.1</b> Objects</a></li>
<li class="chapter" data-level="4.2" data-path="general-coding.html"><a href="general-coding.html#comments"><i class="fa fa-check"></i><b>4.2</b> Comments</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="base-r.html"><a href="base-r.html"><i class="fa fa-check"></i><b>5</b> Base R</a><ul>
<li class="chapter" data-level="5.1" data-path="base-r.html"><a href="base-r.html#loading-in-data"><i class="fa fa-check"></i><b>5.1</b> Loading in data</a></li>
<li class="chapter" data-level="5.2" data-path="base-r.html"><a href="base-r.html#basic-dataframe-functions"><i class="fa fa-check"></i><b>5.2</b> Basic dataframe functions</a></li>
<li class="chapter" data-level="5.3" data-path="base-r.html"><a href="base-r.html#selecting-certain-columnsremoving-columns"><i class="fa fa-check"></i><b>5.3</b> Selecting certain columns/removing columns</a></li>
<li class="chapter" data-level="5.4" data-path="base-r.html"><a href="base-r.html#conditional-selections"><i class="fa fa-check"></i><b>5.4</b> Conditional Selections</a></li>
<li class="chapter" data-level="5.5" data-path="base-r.html"><a href="base-r.html#altering-data-in-dataframes"><i class="fa fa-check"></i><b>5.5</b> Altering data in dataframes</a></li>
<li class="chapter" data-level="5.6" data-path="base-r.html"><a href="base-r.html#writing-data"><i class="fa fa-check"></i><b>5.6</b> Writing data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html"><i class="fa fa-check"></i><b>6</b> Tidy data manipulation</a><ul>
<li class="chapter" data-level="6.1" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#packages"><i class="fa fa-check"></i><b>6.1</b> Packages</a></li>
<li class="chapter" data-level="6.2" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#setup"><i class="fa fa-check"></i><b>6.2</b> Setup</a><ul>
<li class="chapter" data-level="6.2.1" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#what-well-learn-with-dplyr"><i class="fa fa-check"></i><b>6.2.1</b> What we’ll learn with dplyr</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#piping-notation-with-dplyr"><i class="fa fa-check"></i><b>6.3</b> Piping notation with <code>dplyr</code></a></li>
<li class="chapter" data-level="6.4" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#selecting-variables"><i class="fa fa-check"></i><b>6.4</b> Selecting variables</a></li>
<li class="chapter" data-level="6.5" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#renaming-variables"><i class="fa fa-check"></i><b>6.5</b> Renaming variables</a></li>
<li class="chapter" data-level="6.6" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#distinct-combinations"><i class="fa fa-check"></i><b>6.6</b> Distinct combinations</a></li>
<li class="chapter" data-level="6.7" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#making-new-variables-changing-data-types"><i class="fa fa-check"></i><b>6.7</b> Making new variables / changing data types</a></li>
<li class="chapter" data-level="6.8" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#arranging-data"><i class="fa fa-check"></i><b>6.8</b> Arranging data</a></li>
<li class="chapter" data-level="6.9" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#filtering-data"><i class="fa fa-check"></i><b>6.9</b> Filtering data</a></li>
<li class="chapter" data-level="6.10" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#making-new-variables"><i class="fa fa-check"></i><b>6.10</b> Making new variables</a></li>
<li class="chapter" data-level="6.11" data-path="tidy-data-manipulation.html"><a href="tidy-data-manipulation.html#summary-statistics"><i class="fa fa-check"></i><b>6.11</b> Summary statistics</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="graphs.html"><a href="graphs.html"><i class="fa fa-check"></i><b>7</b> Graphs</a><ul>
<li class="chapter" data-level="7.1" data-path="graphs.html"><a href="graphs.html#ggplot2"><i class="fa fa-check"></i><b>7.1</b> ggplot2</a></li>
<li class="chapter" data-level="7.2" data-path="graphs.html"><a href="graphs.html#scatter-plots"><i class="fa fa-check"></i><b>7.2</b> Scatter plots</a></li>
<li class="chapter" data-level="7.3" data-path="graphs.html"><a href="graphs.html#bar-charts"><i class="fa fa-check"></i><b>7.3</b> Bar charts</a></li>
<li class="chapter" data-level="7.4" data-path="graphs.html"><a href="graphs.html#line-graphs"><i class="fa fa-check"></i><b>7.4</b> Line graphs</a></li>
<li class="chapter" data-level="7.5" data-path="graphs.html"><a href="graphs.html#displaying-a-third-variable"><i class="fa fa-check"></i><b>7.5</b> Displaying a third variable</a></li>
<li class="chapter" data-level="7.6" data-path="graphs.html"><a href="graphs.html#styles"><i class="fa fa-check"></i><b>7.6</b> Styles</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="statistical-operations.html"><a href="statistical-operations.html"><i class="fa fa-check"></i><b>8</b> Statistical Operations</a><ul>
<li class="chapter" data-level="8.1" data-path="statistical-operations.html"><a href="statistical-operations.html#maximum-minimum-and-range"><i class="fa fa-check"></i><b>8.1</b> Maximum, Minimum, and Range</a></li>
<li class="chapter" data-level="8.2" data-path="statistical-operations.html"><a href="statistical-operations.html#averages"><i class="fa fa-check"></i><b>8.2</b> Averages</a></li>
<li class="chapter" data-level="8.3" data-path="statistical-operations.html"><a href="statistical-operations.html#correlations"><i class="fa fa-check"></i><b>8.3</b> Correlations</a></li>
<li class="chapter" data-level="8.4" data-path="statistical-operations.html"><a href="statistical-operations.html#significance-testing"><i class="fa fa-check"></i><b>8.4</b> Significance Testing</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i><b>9</b> Iteration</a><ul>
<li class="chapter" data-level="9.1" data-path="iteration.html"><a href="iteration.html#if"><i class="fa fa-check"></i><b>9.1</b> if</a></li>
<li class="chapter" data-level="9.2" data-path="iteration.html"><a href="iteration.html#for-loops"><i class="fa fa-check"></i><b>9.2</b> for loops</a></li>
<li class="chapter" data-level="9.3" data-path="iteration.html"><a href="iteration.html#while-loops"><i class="fa fa-check"></i><b>9.3</b> while loops</a></li>
<li class="chapter" data-level="9.4" data-path="iteration.html"><a href="iteration.html#how-could-we-use-loops"><i class="fa fa-check"></i><b>9.4</b> How could we use loops?</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>10</b> Functions</a><ul>
<li class="chapter" data-level="10.1" data-path="functions.html"><a href="functions.html#writing-functions"><i class="fa fa-check"></i><b>10.1</b> Writing functions</a></li>
<li class="chapter" data-level="10.2" data-path="functions.html"><a href="functions.html#applying-functions-repetitively"><i class="fa fa-check"></i><b>10.2</b> Applying functions repetitively</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>11</b> Maps</a><ul>
<li class="chapter" data-level="11.1" data-path="maps.html"><a href="maps.html#loading-in-geospatial-data"><i class="fa fa-check"></i><b>11.1</b> Loading in geospatial data</a></li>
<li class="chapter" data-level="11.2" data-path="maps.html"><a href="maps.html#coordinate-systems"><i class="fa fa-check"></i><b>11.2</b> Coordinate systems</a></li>
<li class="chapter" data-level="11.3" data-path="maps.html"><a href="maps.html#transforming-mapping-data"><i class="fa fa-check"></i><b>11.3</b> Transforming mapping data</a></li>
<li class="chapter" data-level="11.4" data-path="maps.html"><a href="maps.html#point-maps"><i class="fa fa-check"></i><b>11.4</b> Point maps</a></li>
<li class="chapter" data-level="11.5" data-path="maps.html"><a href="maps.html#chloropleth-maps"><i class="fa fa-check"></i><b>11.5</b> Chloropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>12</b> R Markdown</a><ul>
<li class="chapter" data-level="12.1" data-path="r-markdown.html"><a href="r-markdown.html#text"><i class="fa fa-check"></i><b>12.1</b> Text</a></li>
<li class="chapter" data-level="12.2" data-path="r-markdown.html"><a href="r-markdown.html#code"><i class="fa fa-check"></i><b>12.2</b> Code</a></li>
<li class="chapter" data-level="12.3" data-path="r-markdown.html"><a href="r-markdown.html#multiple-reports"><i class="fa fa-check"></i><b>12.3</b> Multiple Reports</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DfE R training</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="statistical-operations" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> Statistical Operations</h1>
<p>Easily drilling down into data is one of R’s most powerful functions. As we would with Excel, we can use a number of functions to gain a better understanding of the data.</p>
<div id="maximum-minimum-and-range" class="section level2">
<h2><span class="header-section-number">8.1</span> Maximum, Minimum, and Range</h2>
<p>One of the key checks to do on a dataset when loading data in is what extreme values are in each variable:</p>
<ul>
<li>The minimum</li>
<li>The maximum</li>
<li>The range</li>
</ul>
<div class="tip">
<p><b>Tip:</b></p>
<p>Put closing delimiters* on a new line - it’s easier to see which opening delimiter it corresponds to.</p>
<p>*<span class="code">()</span>, <span class="code">{}</span>, <span class="code">[]</span></p>
</div>
<p><br/>
Now, we can calculate the minimum and maximum for any column we require:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1"><span class="kw">min</span>(swfc_<span class="dv">16</span><span class="op">$</span>Pupil_Teacher_Ratio)</a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="kw">max</span>(swfc_<span class="dv">16</span><span class="op">$</span>Pupil_Teacher_Ratio)</a></code></pre></div>
<br/>
<div class="activity">
<p><b>Activity A8.1:</b> It’s coming up with <span class="code">NA</span>. What’s the argument in <span class="code">min</span> or <span class="code">max</span> that we need to add in to return a result?</p>
</div>
<p><br/></p>
<p>We could also write this using the pipe:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1">swfc_<span class="dv">16</span> <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(Pupil_Teacher_Ratio</a>
<a class="sourceLine" id="cb66-3" data-line-number="3">         ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb66-4" data-line-number="4"><span class="st">  </span><span class="kw">min</span>(ARGUMENT_IN_HERE</a>
<a class="sourceLine" id="cb66-5" data-line-number="5">      )</a>
<a class="sourceLine" id="cb66-6" data-line-number="6"></a>
<a class="sourceLine" id="cb66-7" data-line-number="7">swfc_<span class="dv">16</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb66-8" data-line-number="8"><span class="st">  </span><span class="kw">select</span>(Pupil_Teacher_Ratio</a>
<a class="sourceLine" id="cb66-9" data-line-number="9">         ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb66-10" data-line-number="10"><span class="st">  </span><span class="kw">max</span>(ARGUMENT_IN_HERE</a>
<a class="sourceLine" id="cb66-11" data-line-number="11">      )</a></code></pre></div>
<p>These two functions are really useful for identifying extreme values and outliers - potentially values which are incorrect or shouldn’t be there.</p>
<p>We can use another function, similar to <span class="code">min</span> and <span class="code">max</span>, called <span class="code">range</span>.</p>
<br/>
<div class="activity">
<p><b>Activity A8.2:</b> Pick a variable and calculate the range. Think about the arguments you need to use.</p>
</div>
<br/>
<div class="tip">
<p><b>Tip:</b></p>
<p>Statistical functions nearly always need to have <span class="code">NA</span> values removed from the object they’re operating on.</p>
</div>
</div>
<div id="averages" class="section level2">
<h2><span class="header-section-number">8.2</span> Averages</h2>
There are two averages we can calculate:
<ol>
<li>
<b>Mean:</b> This is the ‘average’ that we’re used to - add the values up and divide them by the number of values
</li>
<li>
<b>Median:</b> Line them all up in order, count to the middle value (if its an even number of values, go for halfway between the two middle values)
</li>
</ol>
<p>Let’s apply each of these to a subset of the main dataset.</p>
<p>Mean:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1"><span class="co">#The mean of the total school workforce for primary schools</span></a>
<a class="sourceLine" id="cb67-2" data-line-number="2">swfc_<span class="dv">16</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb67-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(School_Phase <span class="op">==</span><span class="st"> &#39;Primary&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb67-4" data-line-number="4"><span class="st">  </span><span class="kw">group_by</span>(School_Phase) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb67-5" data-line-number="5"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Ave =</span> <span class="kw">mean</span>(Tot_Workforce_HC,<span class="dt">na.rm=</span><span class="ot">TRUE</span>))</a></code></pre></div>
<p>Median:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="co">#The median of the total school workforce for primary schools</span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2">swfc_<span class="dv">16</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb68-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(School_Type <span class="op">==</span><span class="st"> &#39;Academies&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb68-4" data-line-number="4"><span class="st">  </span><span class="kw">group_by</span>(School_Type) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb68-5" data-line-number="5"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Ave =</span> <span class="kw">median</span>(Tot_Workforce_HC,<span class="dt">na.rm=</span><span class="ot">TRUE</span>))</a></code></pre></div>
</div>
<div id="correlations" class="section level2">
<h2><span class="header-section-number">8.3</span> Correlations</h2>
<div align="center">
<img src="www/Correlation.png" width="500"></img>
</div>
<p>We can calculate correlations between 2 or more values.</p>
<p>Let’s just start with two variables:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1"><span class="co">#Base R</span></a>
<a class="sourceLine" id="cb69-2" data-line-number="2"><span class="kw">cor</span>(swfc_<span class="dv">16</span>[,<span class="kw">c</span>(<span class="dv">15</span>,<span class="dv">16</span>)],<span class="dt">use=</span><span class="st">&quot;complete.obs&quot;</span>)</a></code></pre></div>
<pre><code>##                  StatutoryHighAge Tot_Workforce_HC
## StatutoryHighAge        1.0000000        0.6099884
## Tot_Workforce_HC        0.6099884        1.0000000</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1"><span class="co">#Pipes</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2">swfc_<span class="dv">16</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(StatutoryLowAge,StatutoryHighAge)<span class="op">%&gt;%</span><span class="st"> </span><span class="kw">cor</span>(<span class="dt">use=</span><span class="st">&quot;complete.obs&quot;</span>)</a></code></pre></div>
<pre><code>##                  StatutoryLowAge StatutoryHighAge
## StatutoryLowAge        1.0000000        0.7454194
## StatutoryHighAge       0.7454194        1.0000000</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1"><span class="co">#use=&quot;complete.obs&quot; means only use the observations where the data is present in both columns</span></a></code></pre></div>
<br/>
<div class="activity">
<p><b>Activity A8.3:</b> Create an object (a correlation matrix) which has the correlations for all the columns between <span class="code">StatutoryLowAge</span> and <span class="code">Tot_TAs_HC</span>. Assign it to an object name.</p>
</div>
</div>
<div id="significance-testing" class="section level2">
<h2><span class="header-section-number">8.4</span> Significance Testing</h2>
<p>This isn’t a stats course, but significance testing is a really handy technique for analysing data - the first step in learning statistical techniques in a data analyst’s/scientist’s toolkit, and can be relatively easily executed in R.</p>
<p>In practical terms, significance testing is quantifying how confident we are two groups are different to one another.</p>
<p>Suppose we wanted to test whether primary schools had significantly different total workforces to the school population overall.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="kw">t.test</span>(swfc_<span class="dv">16</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(School_Phase <span class="op">==</span><span class="st"> &quot;Primary&quot;</span></a>
<a class="sourceLine" id="cb74-2" data-line-number="2">                          ) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Tot_Workforce_HC),</a>
<a class="sourceLine" id="cb74-3" data-line-number="3">       <span class="dt">mu =</span> <span class="kw">mean</span>(swfc_<span class="dv">16</span><span class="op">$</span>Tot_Workforce_HC,<span class="dt">na.rm=</span><span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb74-4" data-line-number="4">       <span class="dt">alternative =</span> <span class="st">&quot;less&quot;</span>)</a>
<a class="sourceLine" id="cb74-5" data-line-number="5"><span class="kw">t.test</span>(swfc_<span class="dv">16</span>[swfc_<span class="dv">16</span><span class="op">$</span>School_Phase <span class="op">==</span><span class="st"> &quot;Primary&quot;</span>,<span class="dv">17</span>],</a>
<a class="sourceLine" id="cb74-6" data-line-number="6">       <span class="dt">mu =</span> <span class="kw">mean</span>(swfc_<span class="dv">16</span><span class="op">$</span>Tot_Workforce_HC,<span class="dt">na.rm=</span><span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb74-7" data-line-number="7">       <span class="dt">alternative =</span> <span class="st">&quot;less&quot;</span>)</a></code></pre></div>
Let’s break the input down:
<ul>
<li>
<span class="code">t.test()</span>: The technique to test for a significant difference is called a T-test - in this instance we’re carrying out a ‘one-tail’ T-test, which in this instance means checking whether the average of a sample significantly differs from the average of the entire population.
</li>
<li>
<b>Argument 1:</b> The first argument is the sample that we want to the population against. In this instance it’s primary schools.
</li>
<li>
<b>Argument 2:</b> <span class="code">mu</span> is the average of the population.
</li>
<li>
<b>Argument 3:</b> We want to test whether the sample average is ‘less’ than population average. This could also be ‘greater’.
</li>
</ul>
<pre><code>## 
##  One Sample t-test
## 
## data:  swfc_16 %&gt;% filter(School_Phase == &quot;Primary&quot;) %&gt;% select(Tot_Workforce_HC)
## t = -67.484, df = 16683, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is less than 59.69092
## 95 percent confidence interval:
##      -Inf 46.84931
## sample estimates:
## mean of x 
##  46.52847</code></pre>
Now let’s break the output down (in reverse order from how it’s displayed):
<ul>
<li>
<b>Mean of x:</b> This is the average of the sample: 46.5287.
</li>
<li>
<b>Confidence intervals:</b> 95% of the time (i.e. 19 out of 20 times), the average of any random sample of the overall population will be outside the confidence intervals. Here, because we’re only checking whether the sample’s average than the population’s average, we only need a confidence interval above the mean: 46.84931.
</li>
<li>
<b>p-value:</b> To be confident that there is a significant difference, this number needs to be less than 0.05 (i.e. only 1 time out of 20 will a random sample of primary schools we take from the population be smaller than the upper confidence interval.
</li>
</ul>
<p><b>Simple?!?</b></p>
<br/>
<div class="activity">
<p><b>Activity A8.4:</b> Test whether schools in Camden LA District have a significantly higher percentage of vacant posts (column name is <span class="code">FT_Vacant_Posts</span>) than England as a whole, using a t-test.</p>
<p>Repeat for lower.</p>
</div>
<p><br/></p>
<p>As well as comparing a sample to a population we can compare two samples. What we are doing is testing whether the difference of the averages of two samples is <b>significantly different</b> to zero, i.e. there is a difference.</p>
<p>In this example we’re going to test whether primary schools have a significantly different percentage of teachers who are male to schools that have a phase of ‘All Through’.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="kw">t.test</span>(Perc_Male_Teachers <span class="op">~</span><span class="st"> </span>School_Phase, </a>
<a class="sourceLine" id="cb76-2" data-line-number="2">       <span class="dt">data =</span> (swfc_<span class="dv">16</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(School_Phase <span class="op">==</span><span class="st"> &quot;Primary&quot;</span> <span class="op">|</span></a>
<a class="sourceLine" id="cb76-3" data-line-number="3"><span class="st">                                    </span>School_Phase <span class="op">==</span><span class="st"> &quot;All Through&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb76-4" data-line-number="4"><span class="st">                 </span><span class="kw">select</span>(School_Phase,</a>
<a class="sourceLine" id="cb76-5" data-line-number="5">                        Perc_Male_Teachers)))</a></code></pre></div>
Let’s break the input down:
<ul>
<li>
<span class="code">t-test</span>: As above
</li>
<li>
<b>Argument 1:</b> This contains the variable that we’re going to compare the groups on (percentage of teachers that are male), and the characteristic that defines the groups (phase). But there’s more than one phase of school I hear you say…
</li>
<li>
<b>Argument 2:</b> Fear not. In the second argument we use some dplyr to do some filtering. We only select schools that are primary or all through, and we only select the school phase and percentage of teachers that are male columns.
</ul>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  Perc_Male_Teachers by School_Phase
## t = 22.812, df = 151.8, p-value &lt; 2.2e-16
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  15.56238 18.51366
## sample estimates:
## mean in group All Through     mean in group Primary 
##                  31.81972                  14.78170</code></pre>
Now let’s break the output down:
<ul>
<li>
<b>Welch:</b> Dunno who Welch is, but their t-test is the standard one for testing two samples
</li>
<li>
<b>Group means (at the bottom):</b> These are the means of the two samples that we’re comparing
</li>
<li>
<b>Confidence intervals:</b> 95% of the time (i.e. 19 out of 20 times), the average of any random samples taken from each of the groups (primary and all through) will have a difference in their averages of between 15.56238 and 18.51366. Both of those numbers are above 0, so this is looking good…
</li>
<li>
<b>p-value:</b> Again, to be confident that there is a significant difference, this number needs to be less than 0.05 (i.e. only 1 time out of 20 will random samples from primary schools and all through schools be outside the confidence intervals above)
</li>
</ul>
<br/>
<div class="activity">
<p><b>Activity A8.5:</b> Test whether schools in Camden and Northumberland LA Districts have significantly different percentage of vacant posts (column name is <span class="code">FT_Vacant_Posts</span>) than England as a whole, using a two sample t-test.</p>
</div>
<br/>
<div class="tip">
<p><b>Tip:</b></p>
<p>For more info on t-tests, go to <a href="http://www.dummies.com/education/math/statistics/how-to-test-for-an-average-difference-using-the-paired-t-test/">this page</a> on dummies.com.</p>
<p>Also, try out <a href="https://www.graphpad.com/quickcalcs/ttest1.cfm">this page</a> for an interactive two sample t-test calculator if you want a bit more practice.</p>
</div>
<p><br/></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="graphs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="iteration.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
